$(document).ready(function(){let e;$.ajax({url:"config.json",type:"GET",dataType:"json",success:function(o){console.log(o),e=`${o.SERVER_URL}:${o.SERVER_PORT}`,console.log(e),function(e){$.ajax({url:`http://${e}/allProjectsFromDB`,type:"GET",dataType:"json",success:function(o){let t;for(document.getElementById("mainGrid").innerHTML="",t=0;t<o.length;t++){o[t].name;document.getElementById("mainGrid").innerHTML+=`<div id="${o[t]._id}" value="${o[t]._id}" data-bs-toggle="modal" data-bs-target="#project-modal" class="projectCard" style="background: url('${o[t].image_url}'); background-size: cover; background-position: center;">\n\n                        <div id="${o[t]._id}" class="hide projectCard__top">\n                            <i class="projectCard__icon icon fa-solid fa-pen" data-bs-toggle="modal" data-bs-target="#updateModal"></i>\n\n                            <i class="projectCard__icon icon fa-solid fa-trash" data-bs-toggle="modal" data-bs-target='#deleteModal'></i>\n\n                        </div>\n                        <div id="${o[t]._id}" class="hide projectCard__bottom">\n                            <h2 id="${o[t]._id}" class="projectCard__title">${o[t].name}</h2>\n                            <h3 id="${o[t]._id}" class="projectCard__author">${o[t].author}</h3>\n                        </div>                        \n                    </div>`,document.querySelectorAll(".projectCard").forEach(function(o){o.addEventListener("click",function(o){console.log(o.target.id);let t=o.target.id;$.ajax({url:`http://${e}/allProjectsFromDB/${t}`,type:"GET",dataType:"json",success:function(e){console.log(e.name),$("#project-modal-content").empty().append(`\n                                    <div class="modal-header">\n                                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>\n                                    </div>\n\n                                    <div class="projectModal modal-dialog-scrollable">\n                                    \n                                      <div class="projectModal__top" style="background: url('${e.image_url}'); background-size: cover; background-position: center;">\n\n                                      </div>\n                                      <div class="projectModal__bottom">\n                                          <div class="projectModal__left">\n                                              <h1 class="projectModal__name">${e.name}</h1>\n                                              <p class="projectModal__author">${e.author}</p>\n                                          </div>\n                                          <div class="projectModal__right">\n                                              <a class="projectModal__link" href="${e.url}" target="_blank">Link to Portfolio</a>\n                                          </div>\n                                      </div>\n                                      <div class="projectModal__description">\n                                          <h2 class="projectModal__descriptionHeader">\n                                            Description\n                                          </h2>\n                                          <p class="projectModal__descriptionText">\n                                             ${e.description}\n                                          </p>\n                                      </div>\n                                    </div>\n                                    `)}})})}),document.querySelectorAll(".projectCard").forEach(function(e){e.addEventListener("mouseenter",function(e){const o=e.target.querySelectorAll(".hide");for(const e of o)e.classList.remove("hide"),e.classList.add("show")})}),document.querySelectorAll(".projectCard").forEach(function(e){e.addEventListener("mouseleave",function(e){const o=e.target.querySelectorAll(".show");for(const e of o)e.classList.remove("show"),e.classList.add("hide")})}),document.querySelectorAll(".projectCard").forEach(function(o){o.addEventListener("click",function(o){let t=o.target.id;console.log(t),$.ajax({type:"GET",url:`http://${e}/allProjectsFromDB/${t}`,dataType:"json",success:function(e){console.log(e)},error:function(){console.log("Not Working")}})})})}},error:function(){alert("Unable to get Projects")}})}(e)}}),$("#addProjects").click(function(){event.preventDefault(),console.log(e);let o=$("#p-title").val(),t=$("#p-image").val(),a=$("#p-author").val(),n=$("#p-description").val(),l=$("#p-link").val();console.log(o,a,t,l,n),""==o||""==a||""==t||""==n?alert("Please input all details"):$.ajax({url:`http://${e}/addProject`,type:"POST",data:{name:o,image_url:t,author:a,description:n,url:l},success:function(e){console.log(e),alert("Project added")},error:function(){console.log("Error: cannot call api")}})}),$("#updateProject").click(function(){event.preventDefault();let o=$("#u-id").val(),t=$("#u-title").val(),a=$("#u-image").val(),n=$("#u-author").val(),l=$("#u-description").val(),c=$("#u-link").val();console.log(o,t,a,n,l,c),""==o?alert("Please enter Project id for updating"):$.ajax({url:`http://${e}/updateProject/${o}`,type:"PATCH",data:{name:t,image_url:a,author:n,description:l,url:c},success:function(e){console.log(e),alert("Project Updated")},error:function(){console.log("Error: cannot update project")}})}),$("#deleteProject").click(function(){event.preventDefault();let o=$("#delProjectId").val();console.log(o),""==o?alert("Please enter the project ID"):$.ajax({url:`http://${e}/deleteProject/${o}`,type:"DELETE",success:function(){console.log("Deleted"),alert("Project Deleted")},error:function(){console.log("Error: cannot call API")}})})});